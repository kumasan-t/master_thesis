\begin{document}
	\chapter{Introduction}
		``Can you buy a coffee with Bitcoins?''.
		This question has been posed many times since the very early stages of the Bitcoin blockchain. The novel technology born in 2008 by the suggestion of Satoshi Nakamoto \cite{Nakamoto2008} were meant to replace the fiat currency with a fast-processed, private, non-centralized currency that would address the problem of inflation and transaction costs usually operated by governments and banking systems. By the time of writing, Bitcoin alone is still far away to achieve its purpose and the question posed before only brings a negative answer: due to its popularity, Bitcoin transactions costs are way much higher compared with the main transaction processors (VISA, Mastercard, ...) and a transaction validation process is way much slower with respect to the usual operators when it comes to fast purchases (like a coffee indeed), whereas the system has been showed to performing well when big amounts of funds are moved between Bitcoin users. Nevertheless, efforts have been made to tackle this problem, which is crucial for the currency success and the recent wave of popularity speeded up some possible solutions that have been proposed in the literature in the past years.		
		
		Indeed, the rise of interest in the cryptocurrency world has not only concerned investors and/or speculators but also has led many new developers and researchers to approach the subject: by the end of 2017 the number of publications strictly related to Bitcoin was 664, doubling up the number of 2016  publications\footnote{https://cdecker.github.io/btcresearch/}. A large portion of the research community is focusing on the scalability problem of \textit{proof-of-work} based blockchains (e.g. Bitcoin, Ethereum, Litecoin, Bitcoin Cash): the throughput of transactions processed by the current Bitcoin protocol is 7 transactions per second \cite{Decker2013}, far below the throughput of the current dominant transaction processors like VISA average of 2'000 transactions per second (up to 65'000 transactions per second\footnote{https://usa.visa.com/dam/VCOM/download/corporate/media/visanet-technology/aboutvisafactsheet.pdf}). In order to increase the throughput, according to the Bitcoin protocol nature, the number of transactions stored in a block of the chain must be increased. It's easy to see then that as the adoption of the cryptocurrency rises, allowing more transactions in a block results in a linearly ever-growing blockchain size, thus making it impossible for smaller Bitcoin nodes to run their own Bitcoin client due to hardware limits; as a consequence the Bitcoin network would lose its status of decentralized system and will likely converge to the very same behavior of its centralized competitors. Addressing this problem has been the goal of the blockchain community since the very first time the blockchain technology was born. There have been improvements over the year (SegWit update or the block size increase update), but none of these solution came even nearly close to the transactions per second processed by their main competitor.
		
		On January 2016, Joseph Poon and Thaddeus Dryja published a white paper describing a layer 2 technology called Lightning Network\cite{Poon2016}. The idea behind it is very simple: a network of micro-payments channel (i.e. transaction channels between two peers) where each Bitcoin transfer occurs off-blockchain without having trust issues. The idea was instantly seen as something revolutionary among the members of the blockchain community, and as soon as the prototype network went live on the Bitcoin testnet (a testing environment for developers) thousands of users joined it. In late 2017 the Lightning Network faced a new wave of popularity thanks to the golden period Bitcoin was facing and this accelerated the developing process of the network that lead to the 15th of March 2018 release, the day where the Lightning Network went live on the Bitcoin main-net. This pre-release (which is still in its beta version) is addressed to developers in order to get them ready with a plethora of Lightning Apps when the Lightning Network will officially come out from the beta release.
		
		The building of Lightning Network channels has been made possible thanks to "smart contracts", a feature often sponsored as exclusive to Ethereum\cite{Buterin2014} but that is present in most of the cryptocurrencies available. Smart contracts are tools that make use of a broad set of computational instructions to enforce conditions on transactions, i.e. smart contracts can:
		\begin{itemize}
			\item Store informations about an application directly on the blockchain (so that the information stored is persistent and untampered).
			\item Manage the agreement between two user.
			\item Offer a new tool to existing real world contracts.
			\item Function as 'multi-signature' accounts, ensuring that a certain amount of money is expendable only if a required percentage of people agree.
		\end{itemize}
	
		The Lightning Network leverages on this last property, enabling the construction of trustless off-chain payment channels that allow two user to perform an indefinite number of transactions between each other without having to publish every channel balance update onto the blockchain, thus saving disk space and time. Moreover, the Lightning Network allows for payment delegation: indeed if two users which don't belong to the same channel wish to exchange money, they could delegate the payment task to a third party in a trustless way thanks to particular contracts whose violation would result in a financial penalty for the dishonest party.
		
		The aim of the project presented in this thesis is to provide an analysis of said network, measure its robustness using ad-hoc metrics and provide a characterization that would allow to build an equivalent model in order to study the network in a more wider scenario. The project will be structured as follows:
		\begin{itemize}
			\item The second chapter will give a \text{background} of the blockchain technology, the Bitcoin protocol and the Lightning Network.
			\item The third chapter will introduce fundamental concept on the network structure that characterize the Lightning Network and around which two models will be developed.
			\item The fourth chapter will show how the data has been collected and which analysis tools were used to carry structural test of the network.
			\item The fifth chapter will present an initial trend reporting work and then structural aspect of the network are put in evidence. Then the network is tested against two equivalent random graph models to see which one captures at best the property of the Lightning Network. Finally, we provide a formalization of the network from a dynamic point of view, addressing its nodes and edges variability.
			\item The final chapter provides a final overlook of what has been shown so far and will address some of the problem that were faced, providing suggestions for future works that could be carried over this particular technology.
		\end{itemize}
	\section{Motivation}
		Decentralized payment networks and decentralized ledgers are a new entity in IT world and their success relies on guarantees on fairness, privacy, security, availability and persistence: a payment network that is not compliant with these properties is a network that should not to be trusted in any way. The Lightning Network leverage the properties of the Bitcoin blockchain to ensure that untrusted payment routes can be performed, yet it does so by adding a new complex layer on top of the Bitcoin architecture. This layer forms a network whose topology resembles the topology of a \textit{scale-free network}. It is of interest to analyze this network and understand the properties that are provided to the user. 
		
		The market is discovering these new technology, and too often companies try to catch up with the trend by offering products which include blockchain services (such as distributed storage, distributed messaging systems and distributed computing platforms) yet without comprehending the trade-offs these blockchains require to perform, causing an overkill for a service that could have been done with a trusted third party in a cheaper way. Part of the research investigated on whether or not it is useful to use a blockchain \cite{Wust2017}, but in light of the Lightning Network approach, the selection criteria on using a blockchain may be re-evaluated.
		
		There is also an ongoing debate over the scalability problem (that will be discussed in details in the next chapter) whether or not is it better to add a layer of complexity instead of increasing the blocksize of each block. This debate escalated and led to what is known to be a \textit{hard-fork}, that is a  permanent split in the history of the ledger that divided the Bitcoin community into Bitcoin and Bitcoin Cash. Bitcoin Cash decision was to increase the maximum number of transactions per block, currently set at 32MB for each block, allowing the throughput of its network to spike to over one hundred transaction per seconds. Competitors contest Bitcoin Cash decision that this approach doesn't allow for the network to scale properly if the user base will increase in size. Lightning Network is the solution that people are waiting to explore and that could reignite interest in the cryptocurrency world providing a new approach that could led to a new renaissance of the IT world.
		
\end{document}